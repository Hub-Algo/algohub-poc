#pragma version 9

// This TEAL was generated by TEALScript v0.61.0
// https://github.com/algorandfoundation/TEALScript

// This contract is compliant with and/or implements the following ARCs: [ ARC4 ]

// The following ten lines of TEAL handle initial program flow
// This pattern is used to make it easy for anyone to parse the start of the program and determine if a specific action is allowed
// Here, action refers to the OnComplete in combination with whether the app is being created or called
// Every possible action for this contract is represented in the switch statement
// If the action is not implmented in the contract, its repsective branch will be "NOT_IMPLMENTED" which just contains "err"
txn ApplicationID
int 0
>
int 6
*
txn OnCompletion
+
switch create_NoOp create_OptIn NOT_IMPLEMENTED NOT_IMPLEMENTED NOT_IMPLEMENTED NOT_IMPLEMENTED call_NoOp call_OptIn

NOT_IMPLEMENTED:
	err

// createApplication()void
abi_route_createApplication:
	// execute createApplication()void
	callsub createApplication
	int 1
	return

createApplication:
	proto 0 0
	retsub

// createCampaign(string,uint64,uint64,uint64,uint64,uint64,uint64)uint64
abi_route_createCampaign:
	byte 0x; dup // push empty bytes to fill the stack frame for this subroutine's local variables

	// metadataUrl: string
	txna ApplicationArgs 7
	extract 2 0

	// endTime: uint64
	txna ApplicationArgs 6
	btoi

	// startTime: uint64
	txna ApplicationArgs 5
	btoi

	// hardCap: uint64
	txna ApplicationArgs 4
	btoi

	// softCap: uint64
	txna ApplicationArgs 3
	btoi

	// maxBuyCap: uint64
	txna ApplicationArgs 2
	btoi

	// price: uint64
	txna ApplicationArgs 1
	btoi

	// execute createCampaign(string,uint64,uint64,uint64,uint64,uint64,uint64)uint64
	callsub createCampaign
	int 1
	return

createCampaign:
	proto 9 0

	// contracts/campaign/campaign.algo.ts:171
	// sendMethodCall<[], void>({
	//       name: 'createApplication',
	//       clearStateProgram: Campaign.clearProgram(),
	//       approvalProgram: Campaign.approvalProgram(),
	//       globalNumByteSlice: 5,
	//       globalNumUint: 2,
	//     })
	itxn_begin
	int appl
	itxn_field TypeEnum
	method "createApplication()void"
	itxn_field ApplicationArgs

	// contracts/campaign/campaign.algo.ts:173
	// clearStateProgram: Campaign.clearProgram()
	byte b64 CQ==
	itxn_field ClearStateProgram

	// contracts/campaign/campaign.algo.ts:174
	// approvalProgram: Campaign.approvalProgram()
	byte b64 CSACAQAmBQhjYW1wYWlnbgAKdm90ZXNUb3RhbAx2b3Rlc0luRmF2b3IEFR98dTEYIw2BBgsxGQiNBwEYAAAAAAAAAAAAAAErAIgAAiJDigAAiTYaB1cCADYaBhc2GgUXNhoEFzYaAxc2GgIXNhoBF4gAAiJDigcAKCkpgAIAMov/FogBPIv+FogBNov9FogBMIv8FogBKov7FogBJIv6FogBHov5SRUWVwYCTFCIAR5IUGeJiAACIkOKAACJiAACIkOKAACJiAACIkOKAACJiAACIkOKAACJiAACIkOKAACJNhoCF8AwNhoBSRUiEkQjU4gAAiJDigIAMQCAC3ZvdGVyc0FzYUlkZHAARCINRCoqZCIIZ4v/QQAGKytkIghniYgAAiJDigAAKGQnBExQsImIAAIiQ4oAAIAPdmVzdGluZ1NjaGVkdWxlZCcETFCwiYoAASKJigABIomKAAEiiTEbQf7kgAS4RHs2NhoAjgH+1wCABFgjAlqABEgDOgiABPFXdyaABKENWQ+ABC2LCPGABOEfY9GABECYw/aABBDVDMCABEY6uNE2GgCOCf6S/vT+/f8G/w//GP8h/2H/cQCKBAOL/Iv/UIv9i/6JigQDi/yL/lCM/Iv/SRWL/hcIFlcGAoz+i/1MUIz9i/yL/Yv+iQ==
	itxn_field ApprovalProgram

	// contracts/campaign/campaign.algo.ts:175
	// globalNumByteSlice: 5
	int 5
	itxn_field GlobalNumByteSlice

	// contracts/campaign/campaign.algo.ts:176
	// globalNumUint: 2
	int 2
	itxn_field GlobalNumUint

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/campaign/campaign.algo.ts:179
	// factoryApp = this.itxn.createdApplicationID
	itxn CreatedApplicationID
	frame_bury -8 // factoryApp: application

	// contracts/campaign/campaign.algo.ts:181
	// sendPayment({
	//       amount: 200_000,
	//       receiver: factoryApp.address,
	//     })
	itxn_begin
	int pay
	itxn_field TypeEnum

	// contracts/campaign/campaign.algo.ts:182
	// amount: 200_000
	int 200_000
	itxn_field Amount

	// contracts/campaign/campaign.algo.ts:183
	// receiver: factoryApp.address
	frame_dig -8 // factoryApp: application
	app_params_get AppAddress
	assert
	itxn_field Receiver

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// if0_condition
	// contracts/campaign/campaign.algo.ts:185
	// this.algohubCampaigns.exists
	txna Applications 0
	byte 0x616c676f68756243616d706169676e73 // "algohubCampaigns"
	app_global_get_ex
	swap
	pop
	bz if0_else

	// if0_consequent
	// contracts/campaign/campaign.algo.ts:186
	// this.algohubCampaigns.value.push(factoryApp)
	byte 0x616c676f68756243616d706169676e73 // "algohubCampaigns"
	app_global_get
	extract 2 0
	frame_dig -8 // factoryApp: application
	itob
	concat
	byte 0x616c676f68756243616d706169676e73 // "algohubCampaigns"
	swap
	dup
	len
	int 8
	/
	itob
	extract 6 2
	swap
	concat
	app_global_put
	b if0_end

if0_else:
	// contracts/campaign/campaign.algo.ts:188
	// newApp: Application[] = [factoryApp]
	frame_dig -8 // factoryApp: application
	itob
	frame_bury -9 // newApp: application[]

	// contracts/campaign/campaign.algo.ts:189
	// this.algohubCampaigns.value = newApp
	byte 0x616c676f68756243616d706169676e73 // "algohubCampaigns"
	frame_dig -9 // newApp: application[]
	dup
	len
	int 8
	/
	itob
	extract 6 2
	swap
	concat
	app_global_put

if0_end:
	// contracts/campaign/campaign.algo.ts:192
	// sendMethodCall<[number, number, number, number, number, number, string], void>({
	//       applicationID: factoryApp,
	//       name: 'createCampaign',
	//       methodArgs: [price, maxBuyCap, softCap, hardCap, startTime, endTime, metadataUrl],
	//     })
	itxn_begin
	int appl
	itxn_field TypeEnum
	method "createCampaign(uint64,uint64,uint64,uint64,uint64,uint64,string)void"
	itxn_field ApplicationArgs

	// contracts/campaign/campaign.algo.ts:193
	// applicationID: factoryApp
	frame_dig -8 // factoryApp: application
	itxn_field ApplicationID

	// contracts/campaign/campaign.algo.ts:195
	// methodArgs: [price, maxBuyCap, softCap, hardCap, startTime, endTime, metadataUrl]
	frame_dig -1 // price: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -2 // maxBuyCap: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -3 // softCap: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -4 // hardCap: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -5 // startTime: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -6 // endTime: uint64
	itob
	itxn_field ApplicationArgs
	frame_dig -7 // metadataUrl: bytes
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/campaign/campaign.algo.ts:198
	// return factoryApp;
	frame_dig -8 // factoryApp: application
	itob
	byte 0x151f7c75
	swap
	concat
	log
	retsub

// getAllCampaignApps()application[]
abi_route_getAllCampaignApps:
	// execute getAllCampaignApps()application[]
	callsub getAllCampaignApps
	int 1
	return

getAllCampaignApps:
	proto 0 0

	// contracts/campaign/campaign.algo.ts:202
	// return this.algohubCampaigns.value;
	byte 0x616c676f68756243616d706169676e73 // "algohubCampaigns"
	app_global_get
	extract 2 0
	dup
	len
	int 8
	/
	itob
	extract 6 2
	swap
	concat
	byte 0x151f7c75
	swap
	concat
	log
	retsub

create_NoOp:
	method "createApplication()void"
	txna ApplicationArgs 0
	match abi_route_createApplication
	err

call_NoOp:
	method "createCampaign(uint64,uint64,uint64,uint64,uint64,uint64,string)uint64"
	method "getAllCampaignApps()uint64[]"
	txna ApplicationArgs 0
	match abi_route_createCampaign abi_route_getAllCampaignApps
	err

create_OptIn:
	txn NumAppArgs
	bz abi_route_createApplication
	err

call_OptIn:
	err